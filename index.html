function render(data){
    postsData = data;
    const container = document.getElementById("posts");
    container.innerHTML = "";

    // 筛选楼主或全部
    const filtered = onlyOP ? postsData.filter(p => p.name === OP_NAME) : postsData;

    // 当前页起始索引
    const start = (currentPage - 1) * pageSize;
    const pagePosts = filtered.slice(start, start + pageSize);

    pagePosts.forEach((p, i) => {
        // 使用整个数组索引计算楼层
        const floorNumber = filtered.indexOf(p) + 1;

        const isOP = p.name === OP_NAME;
        const nameHTML = `<div class="username">${p.name || '匿名'}${isOP?'（楼主）':''}</div>`;

        const post = document.createElement("div");
        post.className = "post";
        post.innerHTML = `
            ${nameHTML}
            <div class="meta-user">
                积分 ${p.points||0} ｜ ${getLevel(p.points||0)} ｜ ${randomIP()}
            </div>
            <div class="floor">
                ${floorNumber}楼 ｜ 发表于 ${p.time}
            </div>
            <div class="content ${p.deleted?'deleted':''}">
                ${p.deleted?'该帖已被删除':p.content.replace(/\n/g,'<br>')}
            </div>
            <div class="actions">
                ${!p.deleted?`<span onclick="quotePost(${floorNumber})">引用</span>
                <span style="color:#b5a79a;">举报</span>`:''}
            </div>
        `;
        container.appendChild(post);
    });

    renderPages(filtered.length);
}
